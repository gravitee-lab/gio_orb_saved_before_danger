description: >
  This example demonstrates how to use the "`pull-requests-bot`" along with the "`release`" `Orb` job, in a Gravitee.io Software Developement repo's Pipeline

# Provide a use-case based example for using this orb.
# Everything in the `usage` section will be displayed in the orb registry.
# Comments are not retained.
usage:
  # Machine executor, set the machine key to true in .circleci/config.yml:
  version: 2.1
  parameters:
    gio_action:
      type: enum
      enum: [product_release, lts_support_release, sts_support_release, dev_pr_review, support_pr_review, pull_requests_bot]
      default: pull_requests_bot
  orbs:
    # secrethub: secrethub/cli@1.0.0
    gravitee: orbinoid2/gravitee@0.0.1
    # gravitee: gravitee-io/gravitee@0.0.1

  workflows:
    version: 2.1
    pr_bot:
      jobs:
        # Job defined from the [orbinoid2/gravitee@0.0.1] Circle CI Orb
        - gravitee/pull-requests-bot
    release:
      when:
        equal: [ product_release, << pipeline.parameters.gio_action >> ]
      jobs:
        # Job defined from the [orbinoid2/gravitee@0.0.1] Circle CI Orb
        - gravitee/release:
            dry-run: << pipeline.parameters.dry_run >>
            maven_version: 3.6.3
